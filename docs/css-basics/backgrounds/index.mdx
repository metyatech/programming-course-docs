---
sidebar_position: 4
---

import Exercise, { Solution } from '@metyatech/exercise/client';
import { CodePreview } from '@metyatech/code-preview';

# 背景プロパティ（background の基本）

## 今回の目標

次の6つを使って、背景の見た目を自由にコントロールできるようにします。

- background-color
- background-image
- background-repeat
- background-position
- background-attachment
- background-size

ポイント：むずかしい専門用語は使わず、「色」「画像」「くり返し」「置き場所」「スクロールの動き」「大きさ」をセットで理解します。

---

## 1. background-color（復習）

要素のうしろ側に色をぬります。

書き方：
```css
セレクタ {
  background-color: 色;
}
```

<CodePreview
>
```html
<div>背景色のサンプル</div>
```

```css
div {
  background-color: #ffdddd;
}
```
</CodePreview> 

---

## 2. background-image（画像をしきつめる）

うしろに画像をしくことができます。画像ファイルをURLで指定します。

書き方：
```css
セレクタ {
  background-image: url("画像のパス");
}
```

<CodePreview 
  images={{ "img/background-sample.png": require("./img/background-sample.png") }}
>
```html
<div>背景画像のサンプル</div>
```

```css
div {
  height: 500px;
  background-color: #d9e5ff;
  background-image: url("./img/background-sample.png");
}
```
</CodePreview>

注意：見やすくするために、あとで「大きさ」「くり返し」「置き場所」を合わせて使うことが多いです。

:::note 補足：相対パスについて

- `background-image: url("../img/image.png")` のような相対パスは、CSS を書いているファイルの位置を基準として、画像ファイルの位置を指定します。CSS ファイルの場所を起点に、画像ファイルまでの経路をたどる形で書いてください。

- `../` は一つ上のフォルダを指します。

フォルダ構成の例：

```
index.html
css/
  style.css
img/
  image1.png
```

この場合、`css/style.css` から `img/image1.png` を指定するには `../img/image1.png` と書きます。

:::

<Exercise title="演習1: 相対パス練習1">

```html
<div>この div の背景に画像をつける</div>
```

- `index.html` に上の div 要素を置き、高さ 600px にする。
- 背景色を #d9e5ff にする。
- 下のようなフォルダ構成で、image1.png を背景に指定。

```
index.html
css/
  style.css
img/
  image1.png
```

<Solution>

<CodePreview
>
```html
<div>この div の背景に画像をつける</div>
```

```css
div {
  height: 600px;
  background-color: #d9e5ff;
  background-image: url("../img/image1.png");
}
```
</CodePreview>

</Solution>

</Exercise>

<Exercise title="演習2: 相対パス練習2">

```html
<div>この div の背景に画像をつける</div>
```

- `index.html` に上の div 要素を置き、高さ 600px にする。
- 背景色を #d9e5ff にする
- 下のようなフォルダ構成で、image2.png を背景に指定。

```
index.html
css/
  style.css
  image2.png
```

<Solution>

<CodePreview
>
```html
<div>この div の背景に画像をつける</div>
```

```css
div {
  height: 600px;
  background-color: #d9e5ff;
  background-image: url("image2.png");
}
```
</CodePreview> 

</Solution>

</Exercise>

---

## 3. background-repeat（画像をくり返すか）

背景画像をタイルのようにくり返すかどうかを決めます。

| 値 | 説明 |
| --- | --- |
| repeat（初期値） | たてよこにくり返す |
| no-repeat | くり返さない（1枚だけ表示） |
| repeat-x | よこ方向だけくり返す |
| repeat-y | たて方向だけくり返す |
| space | 要素の中に収まるだけ画像を並べ、画像どうしの間に余白を入れる |

<CodePreview 
  images={{ "img/background-sample.png": require("./img/background-sample.png") }}
>
```html
<div class="rep">repeat</div>
<div class="norep">no-repeat</div>
<div class="rx">repeat-x</div>
<div class="ry">repeat-y</div>
<div class="sp">space</div>
```

```css
div {
  height: 250px;
  margin: 10px;
  background-color: #d9e5ff;
  background-image: url("./img/background-sample.png");
}

.rep {
  background-repeat: repeat;
}

.norep {
  background-repeat: no-repeat;
}

.rx {
  background-repeat: repeat-x;
}

.ry {
  background-repeat: repeat-y;
}

/* space の例: 画像を小さくして要素内に並べ、間に余白が入る様子を見せる */
.sp {
  background-repeat: space;
}
```
</CodePreview>

補足: `space` は、画像を要素の中にぴったり並べるのではなく、はみ出さない範囲でできるだけ多く並べ、画像同士の間に等しい余白を入れます。

## 4. background-position（画像の初期位置）

背景画像の初期位置を決めます。

主な指定：`left` / `center` / `right` と `top` / `center` / `bottom` の組み合わせ、または `px`・`%`。

<CodePreview 
  images={{ "img/background-sample.png": require("./img/background-sample.png") }}
>
```html
<div class="p1">left top</div>
<div class="p2">center center</div>
<div class="p3">right bottom</div>
<div class="p4"></div>
```

```css
div {
  height: 300px;
  margin: 10px;
  background-color: #d9e5ff;
  background-image: url("./img/background-sample.png");
}

.p1 {
  background-repeat: no-repeat;
  background-position: left top;
}

.p2 {
  background-repeat: no-repeat;
  background-position: center center;
}

.p3 {
  background-repeat: no-repeat;
  background-position: right bottom;
}

.p4 {
  background-repeat: repeat-x;
  background-position: 100px 100px;
}
```
</CodePreview>

---

<Exercise title="演習3：右上に画像を1枚置く">

```html
<div>高さ300px,右上に画像</div>
```

上の div に対して、
- 高さ300px
- 背景色：#d9e5ff
- 背景画像：下のフォルダ構成で、image1.png
- 背景画像は繰り返さず、右上に1枚だけ表示

```
index.html
css/
  style.css
img/
  image1.png
```

<Solution>

<CodePreview
>
```html
<div>高さ300px,右上に画像</div>
```

```css
div {
  height: 300px;
  background-color: #d9e5ff;
  background-image: url("../img/image1.png");
  background-repeat: no-repeat;
  background-position: right top;
}
```
</CodePreview> 

</Solution>

</Exercise>

<Exercise title="演習4：よこ方向だけくり返し、左下から少しずらす">

```html
<div>高さ300px, 横にだけくり返し</div>
```

上の div に対して、
- 高さ300px
- 背景色：#fff2d9
- 背景画像：下のようなフォルダ構成で、image1.png
- 画像はよこ方向だけくり返し、開始位置を左から80pxで下寄せ

```
index.html
css/
  style.css
img/
  image1.png
```

<Solution>

<CodePreview
>
```html
<div>高さ300px, 横にだけくり返し</div>
```

```css
div {
  height: 300px;
  background-color: #fff2d9;
  background-image: url("../img/image1.png");
  background-repeat: repeat-x;
  background-position: 80px bottom;
}
```
</CodePreview> 

</Solution>

</Exercise>

<Exercise title="演習5：中央に1枚だけ置く">

```html
<div>高さ300px, 上下左右中央に画像が1枚</div>
```

上の div に対して、
- 高さ300px
- 背景色：#f0f0f0
- 背景画像：下のようなフォルダ構成で、image1.png
- 背景画像は1枚だけ表示し、上下左右中央に配置する

```
index.html
css/
  style.css
img/
  image1.png
```

<Solution>

<CodePreview
>
```html
<div>高さ300px, 上下左右中央に画像が1枚</div>
```

```css
div {
  height: 300px;
  background-color: #f0f0f0;
  background-image: url("../img/image1.png");
  background-repeat: no-repeat;
  background-position: center center;
}
```
</CodePreview> 

</Solution>

</Exercise>

---

## 5. background-attachment（スクロール時の動き）

背景画像がスクロールするときにどう動くかを決めます。主な値は次の3つです。

| 値 | 説明 |
| --- | --- |
| local | 要素の内部のコンテンツと背景がいっしょに動きます。要素自体にスクロール領域がある場合に使います。 |
| scroll（初期値） | 要素の相対位置で画像は固定され、要素の内部のコンテンツのコンテンツと共にスクロールはしません。 |
| fixed | 背景を画面（ビューポート）に対する相対位置で固定します。要素をスクロールしても背景は動きません。 |

下の例では、親要素（スクロールコンテナ）をスクロールして、`local` → `scroll` → `fixed` の違いを順に確認できるようにしています。

<CodePreview 
  images={{ "img/background-sample.png": require("./img/background-sample.png") }}
  >
```html
<div class="parent">
  <div class="loc">local（要素の内容と一緒に動く）<br>行1<br>行2<br>行3<br>行4<br>行5<br>行6<br>行7<br>行8<br>行9<br>行10</div>
  <div class="scr">scroll（初期。要素とは一緒に動くが、内容とは一緒に動かない）<br>行1<br>行2<br>行3<br>行4<br>行5<br>行6<br>行7<br>行8<br>行9<br>行10</div>
  <div class="fix">fixed（画面に固定）<br>行1<br>行2<br>行3<br>行4<br>行5<br>行6<br>行7<br>行8<br>行9<br>行10</div>
</div>
```

```css
.parent {
  height: 400px;
  overflow: auto; /* 親をスクロールさせる */
}

.parent > div {
  height: 180px;
  overflow: auto;
  margin: 10px;
  background-image: url("./img/background-sample.png");
}

/* local: 要素内のコンテンツと背景が一緒に動く（要素にスクロールがある場合に有効） */
.loc {
  background-attachment: local;
}

/* デフォルト（scroll）: 背景は要素と一緒に動く */
.scr {
  background-attachment: scroll;
}

/* fixed: 背景は画面に固定され、親をスクロールしても背景は動かない */
.fix {
  background-attachment: fixed;
}
```
</CodePreview>

---

## 6. background-size（画像の大きさ）

背景画像の大きさを決めます。

- `cover` … はみ出してもよいので、枠全体を埋めるようにいっぱいに広げる（切り抜きが発生）
- `contain` … 画像全体が見えるように収める（余白が生まれる）
- `幅 高さ` … 例：`120px 80px`、`50% 50%`

<CodePreview 
  images={{ "img/background-sample.png": require("./img/background-sample.png") }}
>
```html
<div class="s1">cover</div>
<div class="s2">contain</div>
```

```css
div {
  height: 130px;
  margin: 10px;
  background-image: url("./img/background-sample.png");
  background-repeat: no-repeat;
}

.s1 {
  background-size: cover;
}

.s2 {
  background-size: contain;
}
```
</CodePreview>

---

## 7. 実習：簡単なパララックスを作ってみよう

ここまでで学んだ `background-attachment: fixed` を使って、簡単なパララックスを作ってみます。

:::note パララックスについて
**パララックス（parallax）** とは、手前のコンテンツと背後の背景がスクロールの速さや動きでズレて見えることで、奥行きがあるように見せる表現のことです。たとえば、背景を画面に固定しておくと、前の部分（テキストや白い帯）がスクロールするたびに背景との位置が変わるため、奥行きが生まれます。
:::

下の例では、スクロールしてみると背景画像が固定されていて、白い帯（テキスト）だけが動くので、奥行きがあるように見えます。

<CodePreview 
  images={{ "img/parallax1.jpg": require("./img/parallax1.jpg"), "img/parallax2.jpg": require("./img/parallax2.jpg"), "img/parallax3.jpg": require("./img/parallax3.jpg") }}
>
```html
<div class="scrollarea">
  <div class="content">
    <p>最初のコンテンツ領域です。</p>
    <p>色々文章を</p>
    <p>書いておきます</p>
  </div>
  <div class="parallax1">背景が固定されている領域1</div>
  <div class="parallax2">背景が固定されている領域2</div>
  <div class="content">
    <p>別のコンテンツ領域です。</p>
    <p>背景が固定されているので、動きにズレが生まれます。</p>
    <p>これがパララックス効果です。</p>
  </div>
  <div class="parallax3">背景が固定されている領域3</div>
</div>
```

```css
.scrollarea {
  height: 400px;
  overflow: auto;
}

.parallax1,
.parallax2,
.parallax3 {
  height: 100%;
  background-attachment: fixed;
  background-size: cover;
  background-position: center center;
  color: white;
}

.parallax1 {
  background-image: url("./img/parallax1.jpg");
}

.parallax2 {
  background-image: url("./img/parallax2.jpg");
}

.parallax3 {
  background-image: url("./img/parallax3.jpg");
}
```
</CodePreview>

---

## 練習: デザインに合わせて作る

最後に、練習として次のデザイン通りのサイトを作ってみましょう。

デザインへのリンク: https://www.figma.com/design/gPrpQCYBcG9JHotsbEjTwI/backgrounds-practice?node-id=0-1&t=8azfKNFnsyZ0LSy8-1

### 著作権元
<p style={{"font-size":"0.8em"}}><a href="https://www.figma.com/community/file/788675347108478517/mntn-landing-page" target="_blank" rel="noopener noreferrer">上述のデザインの元デザイン</a></p>
